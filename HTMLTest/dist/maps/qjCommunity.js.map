{"version":3,"sources":["app/app.config.js","app/app.js","app/app.mock.js","mrframework/mrDirectives.js","mrframework/mrframework.js","app/common/common.js","app/common/cordova.js","app/common/httpBaseUrlSupport.js","app/common/httpMockBaseUrlSupport.js","app/common/httpTransform.js","app/common/login.js","app/common/mocksdata.js","app/common/pageInit.js","app/common/saveData.js","app/common/savePopShowFrist.js","app/common/saveVersion.js","app/home/home.js","app/userServers/userServers.js","mrframework/directives/goback.js","mrframework/directives/navbar.js","mrframework/directives/rem.js","app/home/cleanWorkOrder/cleanWorkOrder.js","app/home/cleanWorkOrder/cleanWorkOrder.mock.js","app/home/index/index.js","app/home/index/index.mock.js","app/home/mineWork/mineWork.js","app/home/mineWork/mineWork.mock.js","app/home/outTape/outTape.js","app/home/outTape/outTape.mock.js","app/home/visivorPassage/visivorPassage.js","app/home/visivorPassage/visivorPassage.mock.js","app/home/workOrder/workOrder.js","app/home/workOrder/workOrder.mock.js","app/userServers/blankPage/blankPage.js","app/userServers/login/login.js","app/userServers/login/login.mock.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"qjCommunity.js","sourcesContent":["angular.module('qjCommunity.app.config', [\n    'ionic'\n])\n\n//contants\n.constant('ApiBaseUrl', 'http://hxsq.hxsq2016.com:8080/')\n    // .constant('ApiBaseUrl', 'http://172.16.1.19:8080/')\n    .constant('AppDefaultRootUrl', '/blankPage')\n    // .constant('AppDefaultRootUrl', '/home/index')\n    .constant('HTTP_COMMON_ERROR_MESSAGE', '服务器请求返回错误!')\n\n//configs\n.config(['$ionicConfigProvider', function($ionicConfigProvider) {\n        $ionicConfigProvider.tabs.style('standard');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.navBar.positionPrimaryButtons('left')\n        $ionicConfigProvider.backButton.text('');\n        $ionicConfigProvider.backButton.icon('backBtn');\n        $ionicConfigProvider.scrolling.jsScrolling(true);\n        //防止ios滑跑\n        $ionicConfigProvider.views.swipeBackEnabled(false);\n    }])\n    .config(['$urlRouterProvider', 'AppDefaultRootUrl', function($urlRouterProvider, AppDefaultRootUrl) {\n        $urlRouterProvider.otherwise(AppDefaultRootUrl);\n    }])\n    .config(['$locationProvider', function($locationProvider) {\n        $locationProvider.html5Mode({\n            enabled: true,\n            requireBase: false\n        });\n    }])","angular.module('qjCommunity.app', [\n    'maxrocky.framework',\n    'qjCommunity.common',\n    'qjCommunity.app.config',\n    'ionic',\n    'qjCommunity.templates',\n    'qjCommunity.home',\n    'qjCommunity.userServers',\n    \"qjCommunity.login\",\n    'qjCommunity.app.mock'\n])\n\n.run(['$rootScope', 'CurrentUserService',\n    function($rootScope, CurrentUserService, $ionicLoading, $httpBackend) {\n        $rootScope.$on('$stateChangeStart', function(evt, toState, toParams, fromState, fromParams) {\n            CurrentUserService.usrAuth(evt, toState, toParams, fromState, fromParams);\n        });\n        $rootScope.$on('tokenBug', function(event, mass) {\n            CurrentUserService.tokenBug(event, mass);\n        });\n    }\n])\n\n.controller('AppController', ['$scope', '$ionicPopup', '$ionicHistory', 'MrDevice', '$http', 'SaveVersionService', function($scope, $ionicPopup, $ionicHistory, MrDevice, $http, SaveVersionService) {\n    $scope.myGoBack = function() {\n        $ionicHistory.goBack();\n    }\n    var device = MrDevice.getDevice();\n    if (!!device) {\n        platform = device.platform;\n    } else {\n        platform = \"WEB\";\n    }\n    if (platform == 'iOS') {\n        $http.get('/workbench/staffVersion/1')\n            .then(\n                function(message) {\n                    var parmars = {\n                        \"appVersionId\": message.data.appVersionId,\n                        \"appVersionType\": message.data.appVersionType,\n                        \"appVersion\": message.data.appVersion,\n                        \"appVersionStatus\": message.data.appVersionStatus,\n                        \"downUrl\": message.data.downUrl,\n                        \"appVersionName\": message.data.appVersionName,\n                        \"appRemark\": message.data.appRemark,\n                        \"userType\": message.data.userType,\n                        \"sign\": \"1\"\n                    }\n                    MRUpdateApp.upadteAppVersion(function success(message) {\n\n                        SaveVersionService.addVersion(message);\n\n                    }, function failed(message) {\n                        SaveVersionService.addVersion(1.0);\n                    }, parmars);\n                },\n                function(msg) {}\n            );\n    } else if (platform == 'Android') {\n        $http.get('/workbench/staffVersion/2')\n            .then(\n                function(message) {\n                    var parmars = {\n                        \"appVersionId\": message.data.appVersionId,\n                        \"appVersionType\": message.data.appVersionType,\n                        \"appVersion\": message.data.appVersion,\n                        \"appVersionStatus\": message.data.appVersionStatus,\n                        \"downUrl\": message.data.downUrl,\n                        \"appVersionName\": message.data.appVersionName,\n                        \"appRemark\": message.data.appRemark,\n                        \"userType\": message.data.userType,\n                        \"sign\": \"1\"\n                    }\n                    MRUpdateApp.upadteAppVersion(function success(message) {\n                        SaveVersionService.addVersion(message);\n\n                    }, function failed(message) {}, parmars);\n                },\n                function(msg) {\n                    //++++++++++++++++++++++++要去掉\n                    var parmars = {}\n                    MRUpdateApp.upadteAppVersion(function success(message) {\n                        // alert(\"测试缓存\");\n                        SaveVersionService.addVersion(\"1.0\");\n\n                    }, function failed(message) {}, parmars);\n\n                }\n            );\n    };\n}])","angular.module('qjCommunity.app.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    $httpBackend.whenGET('/workbench/staffVersion/1').passThrough();\n    $httpBackend.whenGET('/workbench/staffVersion/2').passThrough();\n}])\n","angular.module('maxrocky.framework.directives',[\n\t'maxrocky.framework.directives.rem',\n\t'maxrocky.framework.directives.navBar',\n\t'maxrocky.framework.directives.goback'\n])","angular.module('maxrocky.framework',[\n\t'maxrocky.framework.directives'\n\t// 'maxrocky.framework.swiper',\n\t// 'maxrocky.framework.iscroll'\n])\n\n","angular.module('qjCommunity.common', [\n    'qjCommunity.common.httpTransform',\n    'qjCommunity.common.httpBaseUrlSupport',\n    'qjCommunity.common.httpMockBaseUrlSupport',\n    'qjCommunity.common.login',\n    'qjCommunity.common.pageInit',\n    'qjCommunity.common.saveData',\n    'qjCommunity.common.saveVersion',\n    'qjCommunity.common.cordova',\n    'qjCommunity.common.savePopShowFrist'\n])","if (!isApp) {\n    var module = angular.module('qjCommunity.common.cordova', [])\n    module.factory('MrCamera', [function() {\n        return {\n            getPicture: function() {\n                alert(\"没有硬件\");\n            },\n        };\n    }])\n    module.factory('MrImagePicker', [function() {\n        return {\n            getPictures: function() {\n                alert(\"没有硬件\");\n            },\n        };\n    }])\n    module.factory('MrDevice', [function() {\n        return {\n            getDevice: function() {},\n        };\n    }])\n    module.factory('MrBarcodeScanner', [function() {\n        return {\n            scan: function() {\n                alert(\"没有硬件\");\n            },\n        };\n    }])\n} else {\n    var module = angular.module('qjCommunity.common.cordova', ['ngCordova'])\n    module.factory('MrCamera', ['$cordovaCamera', function($cordovaCamera) {\n        return $cordovaCamera;\n    }])\n    module.factory('MrImagePicker', ['$cordovaImagePicker', function($cordovaImagePicker) {\n        return $cordovaImagePicker;\n    }])\n\n    module.factory('MrDevice', ['$cordovaDevice', function($cordovaDevice) {\n        return $cordovaDevice;\n    }])\n\n    module.factory('MrBarcodeScanner', ['$cordovaBarcodeScanner', function($cordovaBarcodeScanner) {\n        return $cordovaBarcodeScanner;\n    }])\n}","angular.module('qjCommunity.common.httpBaseUrlSupport', [\n    'ionic',\n    'qjCommunity.app.config'\n])\n\n.config(['$provide', 'ApiBaseUrl', function($provide,ApiBaseUrl){\n\tfunction combineUrl(baseUrl,url){\n\t\twhile(url.indexOf('/')===0) url=url.substring(1);\n\t\treturn baseUrl+url;\n\t}\n\n\t$provide.decorator('$http',['$delegate', function($delegate) {\n        var $http = $delegate;\n \n\t    var wrapper = function () {\n\t      \treturn $http.apply($http, arguments);\n\t    };\n\t \n\t    Object.keys($http).filter(function (key) {\n\t      \treturn (typeof $http[key] === 'function');\n\t    }).forEach(function (key) {\n\t      \twrapper[key] = function () {\n\t      \t\tvar url=arguments[0];\n\t      \t\tif(url.match('.tpl.html')||url.indexOf('http://')===0){\n\t        \t\treturn $http[key].apply($http, arguments);\n\t      \t\t}\n\t      \t\telse{\n\t      \t\t\turl=combineUrl(ApiBaseUrl,url);\n\t      \t\t\targuments[0]=url;\n\t        \t\treturn $http[key].apply($http, arguments);\n\t      \t\t}\n\t      \t};\n\t    });\n\t \n\t    return wrapper;\n    }]);\n}])","angular.module('qjCommunity.common.httpMockBaseUrlSupport', [\n    'ionic',\n    'ngMockE2E',\n    'qjCommunity.app.config'\n])\n\n.config(['$provide', 'ApiBaseUrl', function($provide,ApiBaseUrl){\n\tfunction combineUrl(baseUrl,url){\n\t\twhile(baseUrl.lastIndexOf('/')===baseUrl.length-1) baseUrl=baseUrl.substring(0,baseUrl.length-1);\n\t\treturn baseUrl+url;\n\t}\n\n\t$provide.decorator('$httpBackend', ['$delegate',function($delegate) {\n        var $httpBackend = $delegate;\n \t\tvar when=$httpBackend.when;\n\t    $httpBackend.when=function(){\n\t    \tvar url=arguments[1];\n      \t\tif(typeof url ==='string' && url.indexOf('http://')!==0 && (url.indexOf('.tpl.html')===-1||url.indexOf('.tpl.html')!==url.length-9)){\n      \t\t\turl=combineUrl(ApiBaseUrl,url);\n      \t\t\targuments[1]=url;\n\t      \t\treturn when.apply($httpBackend, arguments);\n      \t\t}\n      \t\telse if(url instanceof RegExp && url.source.indexOf('http:\\\\/\\\\/')!==0){\n      \t\t\turl=new RegExp(combineUrl(ApiBaseUrl,url.source));\n      \t\t\targuments[1]=url;\n\t      \t\treturn when.apply($httpBackend, arguments);\n      \t\t}\n      \t\telse{\n      \t\t\treturn when.apply($httpBackend, arguments);\n      \t\t}\n\t    }\n\t \n\t    return $httpBackend;\n    }]);\n}])","angular.module('qjCommunity.common.httpTransform', [\n    'ionic',\n    'qjCommunity.app.config'\n])\n\n.config(['$httpProvider', function($httpProvider) {\n    $httpProvider.defaults.withCredentials = true;\n}])\n\n.config(['$httpProvider', function($httpProvider) {\n    $httpProvider.interceptors.push('commonResponseParser');\n}])\n\n.factory('commonResponseParser', ['$q', 'HTTP_COMMON_ERROR_MESSAGE', '$rootScope', function($q, HTTP_COMMON_ERROR_MESSAGE, $rootScope) {\n    return {\n        response: function(response) {\n            if (!!response.config.url.match('.tpl.html'))\n                return response;\n            if (response.data && response.data.code === 0 && response.data.data.roleId != \"9\" && response.data.data.roleId != \"10\" && response.data.data.roleId != \"11\" && response.data.data.roleId != \"12\") {\n                response.data = response.data.data;\n                return response;\n            } else if (response.data.msg) {\n                if (response.data.msg == \"当前未登录\" || response.data.msg == \"您的账号已在其他地方登录。\") {\n                    $rootScope.$broadcast('tokenBug', [response.data.msg]);\n                };\n                if (response.data.data.roleId == \"9\" || response.data.data.roleId == \"10\" || response.data.data.roleId == \"11\" || response.data.data.roleId == \"12\") {\n                    response.data.msg=\"用户名或密码错误\";\n                    return $q.reject({\n                        data: response.data.msg,\n                        status: response.status,\n                        headers: response.headers,\n                    });\n                } else {\n                    return $q.reject({\n                        data: response.data.msg,\n                        status: response.status,\n                        headers: response.headers\n                    });\n                }\n            } else {\n                return $q.reject(response);\n            }\n        },\n        responseError: function(rejection) {\n            return $q.reject(HTTP_COMMON_ERROR_MESSAGE);\n        }\n    };\n}])","angular.module('qjCommunity.common.login', [])\n    .service('Session', [function() {\n        this.userInfoData = null;\n        this.validTime = null;\n        this.showTabBaoan = false;\n        this.showTabBaojie = false;\n        this.showTabWeixiu = false;\n        this.showSend = false;\n        this.create = function(userInfoData, validTime) {\n            this.userInfoData = userInfoData;\n            this.validTime = validTime;\n            if (userInfoData.roleId == 1 || userInfoData.roleId == 4) {\n                this.showTabBaoan = true;\n            } else if (userInfoData.roleId == 5 || userInfoData.roleId == 2) {\n                this.showTabBaojie = true;\n            } else if (userInfoData.roleId == 3 || userInfoData.roleId == 6) {\n                this.showTabWeixiu = true;\n            }\n\n            if (userInfoData.roleId == 1 || userInfoData.roleId == 2 || userInfoData.roleId == 3) {\n                this.showSend = true;\n            };\n        };\n        this.destroy = function() {\n            this.userInfoData = null;\n\n            this.validTime = null;\n        }\n        return this;\n    }])\n\n.factory('CurrentUserService', ['$rootScope', '$timeout', '$ionicHistory', '$http', 'Session', '$filter', '$state', '$ionicModal', '$ionicPopup', 'SavePopShowFristService',\n    function($rootScope, $timeout, $ionicHistory, $http, Session, $filter, $state, $ionicModal, $ionicPopup, SavePopShowFristService) {\n        var currentUser = {};\n        currentUser.login = function(credentials) {\n            return $http\n                .post('/user/loginForStaff', credentials)\n                .then(function(res) {\n                        SavePopShowFristService.setPopShowBlr(true);\n                        var validTime = parseInt($filter('date')(new Date(), 'yyyyMMdd')) + 2;\n                        Session.create(res.data, validTime);\n                        return res;\n                    },\n                    function(data) {\n                        var alertPopup = $ionicPopup.alert({\n                            title: data.data || data,\n                            okText: '取消',\n                            template: data.data || data\n                        });\n                    });\n        };\n        currentUser.userSession = function() {\n            return Session;\n        };\n        currentUser.destroyUserSession = function() {\n            Session.destroy();\n            return Session;\n        };\n        currentUser.contains = function(arr, obj) {\n            var i = arr.length;\n            while (i--) {\n                if (arr[i] === obj) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        currentUser.usrAuth = function(evt, toState, toParams, fromState, fromParams) {\n            var rule = toState.authorizedRuleType;\n            pageAuth(rule, evt, toState, toParams);\n            if (!Session.userInfoData) {\n                $http.get('workOrder/getUserRole').then(\n                    function(data) { //有cookie 更新用户信息\n                        usr = currentUser.updateSession(data.data).userInfoData.roleId;\n                        blankPageToHomeIndex(toState);\n                    },\n                    function() {\n                        if (!!rule) { //没有cookie 重新登录\n                            if (!Session.userInfoData) {\n                                $ionicModal.fromTemplateUrl('userServers/login/login.tpl.html', {\n                                        nextState: {\n                                            toState: toState,\n                                            toParams: toParams\n                                        },\n                                        backdropClickToClose: false,\n                                        animation: 'slide-in-right'\n                                    })\n                                    .then(function(modal) {\n                                        modal.show();\n                                    });\n                                return;\n                            };\n                        };\n\n                    });\n            } else {\n                blankPageToHomeIndex(toState);\n            };\n        };\n        var pageAuth = function(rule, evt, toState, toParams) {\n            var showConfirm = function(template, okText, num) {\n                var alertPopup = $ionicPopup.alert({\n                    template: template,\n                    okText: okText\n                });\n                alertPopup.then(function(res) {\n                    if (res && num == 1) { $ionicHistory.goBack(); }\n                });\n            };\n            if (!Session.userInfoData) return;\n            var usr = Session.userInfoData.roleId;\n            var isHasAuth = currentUser.contains(rule, usr);\n            if (!isHasAuth) {\n                evt.preventDefault();\n                showConfirm('权限不足', '确定', '2');\n            } else {}\n        };\n        var blankPageToHomeIndex = function(toState) {\n            if (toState.name == \"blankPage\") {\n                $state.go(\"home/index\", {}, { location: 'replace' });\n                $ionicHistory.nextViewOptions({\n                    disableAnimate: true,\n                    disableBack: true\n                });\n            }\n        };\n        currentUser.tokenBug = function(event, mass) {\n            if (SavePopShowFristService.getPopShowBlr().popShowBlr) {\n                if ($state.current.name != \"blankPage\") {\n                    if ($rootScope.tokenBugThenFn) {\n                        $timeout.cancel($rootScope.tokenBugThenFn);\n                    }\n                    $rootScope.tokenBugThenFn = $timeout(function() {\n                        SavePopShowFristService.setPopShowBlr(false);\n                        $rootScope.tokenBugThenFn = null;\n                        showAlert(\"提示\", mass, \"确定\");\n                    }, 50);\n                }\n            }\n        };\n        var showAlert = function(title, template, okText) {\n            var alertPopup = $ionicPopup.alert({\n                title: title,\n                okText: okText,\n                template: template\n            });\n            alertPopup.then(function(res) {\n                currentUser.destroyUserSession();\n                if (isApp) {\n                    MRClearCache.finshCache(function success() {}, function failed(message) {});\n                } else {\n                    $state.go(\"blankPage\", {}, { location: 'replace' });\n                }\n            });\n        };\n        currentUser.updateSession = function(data) {\n            var validTime = parseInt($filter('date')(new Date(), 'yyyyMMdd')) + 2;\n            Session.create(data, validTime);\n            return Session;\n        };\n        return currentUser;\n    }\n])","angular.module('qjCommunity.common.mocksData',[\n])\n\n.factory('mocksData', [function(){\n\treturn {\n\t\tresetData: function(data){\n\t\t\tvar result={code:0};\n\t\t\tresult.data=data;\n\t\t\t\treturn result;\n\t\t\t\n\t\t}\n\t};\n}])\n\n\n\n","angular.module('qjCommunity.common.pageInit', [])\n\n.factory('pageInitService', ['$q','$http','$ionicLoading',\n    function($q, $http,  $ionicLoading) {\n        var pageInit = {};\n        pageInit.pageInit = function(apis) {\n            $ionicLoading.show();\n            var data = [];\n            for (var i = 0; i < apis.length; i++) {\n                data[i] = (function() {\n                    return $http.get(apis[i]); })();\n            };\n            return $q.all(data).finally(function() {\n                $ionicLoading.hide();\n            });\n        };\n        return pageInit;\n    }\n])","angular.module('qjCommunity.common.saveData', [])\n\n.service('addIdService', [function() {\n    this.create = function(workOrderArray) {\n        this.workOrderArray = workOrderArray;\n    };\n    this.destroy = function() {\n        this.workOrderArray = [];\n    };\n    return this;\n}])\n\n.factory('SaveWordOrderIdService', ['addIdService', function(addIdService) {\n    var saveWordOrderId = {};\n    saveWordOrderId.containsBool = function(arr, obj) {\n        var i = arr.length;\n        while (i--) {\n            if (arr[i] === obj) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    saveWordOrderId.containsIndex = function(arr, obj) {\n        var i = arr.length;\n        while (i--) {\n            if (arr[i] === obj) {\n                return i;\n            }\n        }\n    }\n    saveWordOrderId.isEmpty = function(arr) {\n        return arr ? arr.workOrderArray.length > 0 : false;\n    }\n\n    saveWordOrderId.arrSize = function(arr) {\n        return arr.workOrderArray.length;\n    }\n\n    saveWordOrderId.getId = function(arr, i) {\n        return arr.workOrderArray[i];\n    }\n\n    saveWordOrderId.addArray = function(workOrderArray) {\n        addIdService.create(workOrderArray);\n    }\n\n    saveWordOrderId.deleteArray = function() {\n        addIdService.destroy();\n    }\n\n    saveWordOrderId.getWorkOrderArray = function() {\n        return addIdService;\n    };\n    return saveWordOrderId;\n}])\n\n","angular.module('qjCommunity.common.savePopShowFrist', [])\n\n.service('savePopShowFrist', [function() {\n    this.popShowBlr = false;\n    this.create = function(popShowBlr) {\n        this.popShowBlr = popShowBlr;\n    };\n     this.destroy = function(popShowBlr) {\n        this.popShowBlr = popShowBlr;\n    };\n    return this;\n}])\n\n.factory('SavePopShowFristService', ['savePopShowFrist', function(savePopShowFrist) {\n    var savePopShowFristExample = {};\n\n    savePopShowFristExample.setPopShowBlr = function(popShowBlr) {\n        savePopShowFrist.create(popShowBlr);\n    }\n\n    savePopShowFristExample.getPopShowBlr = function() {\n        return savePopShowFrist;\n    };\n    return savePopShowFristExample;\n}])","angular.module('qjCommunity.common.saveVersion', [])\n\n.service('saveVersion', [function() {\n    this.create = function(appVersion) {\n        this.appVersion = appVersion;\n    };\n    return this;\n}])\n\n.factory('SaveVersionService', ['saveVersion', function(saveVersion) {\n    var saveVersionExample = {};\n\n    saveVersionExample.addVersion = function(appVersion) {\n        saveVersion.create(appVersion);\n    }\n\n    saveVersionExample.getVersion = function() {\n        return saveVersion;\n    };\n    return saveVersionExample;\n}])","angular.module('qjCommunity.home', [\n    'ionic',\n    'qjCommunity.home.index',\n    'qjCommunity.home.workOrder',\n    'qjCommunity.home.visivorPassage',\n    'qjCommunity.home.outTape',\n    'qjCommunity.home.mineWork'\n])\n\n.controller('HomeTabController', ['$scope', '$http', '$state', '$ionicViewSwitcher', '$ionicHistory',\n    function($scope, $http, $state, $ionicViewSwitcher, $ionicHistory) {\n\n        $scope.getContentTpl = function() {\n            return $scope.currentTab + '/content.tpl.html';\n        }\n        $scope.isActived = function(tabName) {\n            return tabName == $scope.currentTab;\n        }\n        $scope.goTab = function(tabName) {\n            if (tabName != $scope.currentTab) {\n                $ionicViewSwitcher.nextDirection('none');\n                $ionicHistory.nextViewOptions({ historyRoot: true });\n                $ionicHistory.clearHistory();\n                $state.go(tabName, {}, {\n                    location: 'replace'\n                });\n            }\n        }\n    }\n])","angular.module('qjCommunity.userServers', [\n    'qjCommunity.blankPage',\n    'qjCommunity.login'\n])\n","angular.module('maxrocky.framework.directives.goback',[\n])\n\n.directive('mrGoBack',['$ionicHistory','$parse', '$filter', function($ionicHistory,$parse, $filter){\n\treturn {\n\t\trestrict:'C',\n\t\tlink: function(scope, element, attrs){\n            element.on('click',function(){\n             \t$ionicHistory.goBack();\n            });\n\t\t}\n\t};\n}])","angular.module('maxrocky.framework.directives.navBar',[\n])\n\n.directive('mrNavBar',['$parse', '$filter', function($parse, $filter){\n\n\treturn {\n\t\trestrict:'C',\n\t\tscope:{\n\t\t\topacity:\"=\"\n\t\t},\n\t\tlink: function(scope, element, attrs){\n\t\t\tscope.$watch('opacity',function(newValue){\n\t\t\t\tnewValue=newValue||0;\n\t\t\t\telement.css('opacity',newValue);\n\t\t\t})\n\t\t}\n\t};\n}])","angular.module('maxrocky.framework.directives.rem',[\n])\n\n.directive('mrRem',['$parse', '$filter', function($parse, $filter){\n\n\treturn {\n\t\trestrict:'A',\n\t\tlink: function(scope, element, attrs){\n\t    var _size = 50;\n        var p = (document.body && document\n            .body.clientWidth || document.getElementsByTagName(\"html\")[0].offsetWidth) / 375;\n        _size = p * 50; \n        document.getElementsByTagName(\"html\")[0].setAttribute(\"style\", \"font-size:\" + _size + \"px!important\");\n   \n\t\t}\n\t};\n}])","angular.module('qjCommunity.home.cleanWorkOrder', [\n        'ionic',\n        'qjCommunity.home.cleanWorkOrder.mock',\n    ])\n    .config(['$stateProvider', function($stateProvider) {\n        $stateProvider.state('home/cleanWorkOrder', {\n            url: '/home/cleanWorkOrder',\n            controller: 'cleanWorkOrderController',\n            templateUrl: 'home/cleanWorkOrder/cleanWorkOrder.tpl.html',\n            cache: 'false',\n            resolve: {\n                resolvedData: ['$http', function($http) {\n                    return $http.get('/workOrder/workOrderList?pageIndex=0&pageSize=10');\n                }]\n            },\n            authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\n        })\n    }])\n\n.controller('cleanWorkOrderController', ['$scope', '$http', 'resolvedData', '$state', '$ionicViewSwitcher', '$ionicTabsDelegate', '$ionicHistory', '$ionicPopup', 'CurrentUserService',\n        function($scope, $http, resolvedData, $state, $ionicViewSwitcher, $ionicTabsDelegate, $ionicHistory, $ionicPopup, CurrentUserService) {\n\n            $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n            $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n            $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n            $scope.showSend = CurrentUserService.userSession().showSend;\n\n            $scope.$on('$ionicView.enter', function() {\n                $scope.currentTab = 'home/cleanWorkOrder';\n                $ionicTabsDelegate.select(1);\n            })\n            if (resolvedData != null) {\n                $scope.data = resolvedData.data;\n            };\n\n            $scope.sortShow = 1;\n            $scope.changeItem = function(numType) {\n                $scope.sortShow = numType;\n            };\n            var hasNextPage = function(data) {\n                return data ? data.length > 0 : false;\n            }\n            $scope.pageInfo = {\n                hasNextPage: hasNextPage($scope.data),\n                pageNum: 1\n            };\n\n            $scope.refresh = function(url) {\n                    $http.get(url)\n                        .success(function(result) {\n                            $scope.data = result;\n                            $scope.pageInfo.pageNum = 1;\n                            $scope.pageInfo.hasNextPage = hasNextPage($scope.data);\n                        })\n                        .finally(function() {\n                            // 停止广播ion-refresher\n                            $scope.$broadcast('scroll.refreshComplete');\n                        });\n                }\n                //下拉刷新待分配\n            $scope.doRefresh = function() {\n                return $scope.refresh('/workOrder/workOrderList?pageIndex=0&pageSize=10');\n            };\n\n            $scope.loadMore = function() {\n                $http.get('/workOrder/workOrderList', {\n                    params: {\n                        pageIndex: $scope.pageInfo.pageNum + 1,\n                        pageSize: 10\n                    }\n                }).success(function(result) {\n                    $scope.pageInfo.pageNum += 1;\n                    $scope.pageInfo.hasNextPage = hasNextPage(result);\n                    if (result.length) {\n                        for (var i = 0; i < result.length; i++) {\n                            $scope.data.push(result[i]);\n                        }\n                    }\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                }).finally(function() {\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            };\n        }\n    ])\n    //字数控制过滤器\n    .filter('characters', function() {\n        return function(input, chars, breakOnWord) {\n            if (isNaN(chars)) return input;\n            if (chars <= 0) return '';\n            if (input && input.length > chars) {\n                input = input.substring(0, chars);\n\n                if (!breakOnWord) {\n                    var lastspace = input.lastIndexOf(' ');\n                    //get last space\n                    if (lastspace !== -1) {\n                        input = input.substr(0, lastspace);\n                    }\n                } else {\n                    while (input.charAt(input.length - 1) === ' ') {\n                        input = input.substr(0, input.length - 1);\n                    }\n                }\n                return input + '…';\n            }\n            return input;\n        };\n    })","angular.module('qjCommunity.home.cleanWorkOrder.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    var data = {\n        currentPage: \"2\", //当前页\n        totalPages: \"5\", //总页数\n        wordOrderList: [{\n            type: '户内',\n            id: '201508119273', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\", //0:未分配；1：继续；2：投诉;3:抢单\n        }, {\n            type: '户内', //0:代表[户内]报修;1:代表[公区];2:代表[投诉]\n            id: '201508119273', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\",\n        }, ],\n    };\n    var result = mocksData.resetData(data);\n    // $httpBackend.whenGET('/cleanWorkOrder/cleanWorkOrderList?type=户内&pageIndex=0&pageSize=10').respond(result);\n     $httpBackend.whenGET(/\\/workOrder\\/workOrderList(\\?pageIndex=(\\d)?&pageSize=(\\d)?)?/).passThrough();\n}]);","angular.module('qjCommunity.home.index', [\n    'ionic',\n    'qjCommunity.home.index.mock',\n]).config(['$stateProvider', function($stateProvider) {\n    $stateProvider.state('home/index', {\n        url: '/home/index',\n        controller: 'HomeIndexController',\n        templateUrl: 'home/index/index.tpl.html',\n        cache: false,\n        resolve: {\n            resolvedData: ['$http', function($http) {\n                return $http.get('/staffMessage/staffMessageList?pageIndex=1&pageSize=10');\n            }]\n        },\n        authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n    })\n}])\n\n.controller('HomeIndexController', ['$scope', '$http', 'resolvedData', '$state', '$ionicViewSwitcher', '$ionicTabsDelegate', '$ionicHistory', 'CurrentUserService', '$interval', '$ionicPopup',\n    function($scope, $http, resolvedData, $state, $ionicViewSwitcher, $ionicTabsDelegate, $ionicHistory, CurrentUserService, $interval, $ionicPopup) {\n\n        $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n        $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n        $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n\n        $scope.$on('$ionicView.enter', function() {\n            $scope.currentTab = 'home/index';\n            $ionicTabsDelegate.select(0);\n        })\n\n        $scope.$on('$ionicView.beforeLeave', function() {\n            $interval.cancel(stop);\n        })\n\n        if (resolvedData != null) {\n            $scope.data = resolvedData.data;\n        }\n        $scope.getOwner = function(owner) {\n            return owner.replace(\"null\", \"\")\n        }\n\n        var hasNextPage = function(data) {\n            return data ? data.length > 0 : false;\n        }\n        $scope.pageInfo = {\n            hasNextPage: hasNextPage($scope.data),\n            pageNum: 1\n        };\n\n        $scope.refresh = function(url) {\n                $http.get(url)\n                    .success(function(result) {\n                        $scope.data = result;\n                        $scope.pageInfo.pageNum = 1;\n                        $scope.pageInfo.hasNextPage = hasNextPage($scope.data);\n                    })\n                    .finally(function() {\n                        // 停止广播ion-refresher\n                        $scope.$broadcast('scroll.refreshComplete');\n                    });\n            }\n            //下拉刷新待分配\n        $scope.doRefresh = function() {\n            return $scope.refresh('/staffMessage/staffMessageList?pageIndex=0&pageSize=10');\n        };\n\n        $scope.loadMore = function() {\n            $http.get('/staffMessage/staffMessageList', {\n                params: {\n                    pageIndex: $scope.pageInfo.pageNum + 1,\n                    pageSize: 10\n                }\n            }).success(function(result) {\n                $scope.pageInfo.pageNum += 1;\n                $scope.pageInfo.hasNextPage = hasNextPage(result);\n                if (result.length) {\n                    for (var i = 0; i < result.length; i++) {\n                        $scope.data.push(result[i]);\n                    }\n                }\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n            }).finally(function() {\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        };\n        $scope.delete = function(index, messageTargetId) {\n            showConfirm('确定要删除这条消息？', '确定', '取消', index, messageTargetId);\n        };\n        var showConfirm = function(template, leftText, rightText, index, messageTargetId) {\n            var confirmPopup = $ionicPopup.confirm({\n                template: template,\n                okText: leftText,\n                cancelText: rightText\n            });\n            confirmPopup.then(function(res) {\n                if (res) {\n                    $http.delete('/staffMessage/DelMessage/' + messageTargetId).success(function(result) {\n                        // showAlert('删除成功！', '确定', 2);\n                        $scope.data.splice(index, 1);\n                    }).error(function(msg) {\n                        showAlert('删除失败：' + msg, '确定', 2);\n                    });\n                }\n            });\n\n        };\n        \n        //轮询\n        stop = $interval(function() {\n            $http.get('/staffMessage/staffMessageList?pageIndex=1&pageSize=10')\n                .success(function(result) {\n                    $scope.data = result;\n                }).finally(function() {});\n        }, 6000);\n    }\n])\n\n//字数控制过滤器\n.filter('characters', function() {\n    return function(input, chars, breakOnWord) {\n        if (isNaN(chars)) return input;\n        if (chars <= 0) return '';\n        if (input && input.length > chars) {\n            input = input.substring(0, chars);\n\n            if (!breakOnWord) {\n                var lastspace = input.lastIndexOf(' ');\n                //get last space\n                if (lastspace !== -1) {\n                    input = input.substr(0, lastspace);\n                }\n            } else {\n                while (input.charAt(input.length - 1) === ' ') {\n                    input = input.substr(0, input.length - 1);\n                }\n            }\n            return input + '…';\n        }\n        return input;\n    };\n})","angular.module('qjCommunity.home.index.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    var data = [{\n        typeOne: '0',\n        type: '公区', //0:代表[户内]1:代表[公区]\n        id: '201508119273', //单子标记\n        owner: '唐小包 11111111111',\n        content: '在楼前新小区建设听证会上',\n        createDate: \"2015-10-13  12:39\",\n        address: \"南京市建邺区万达广场8-A-3-1102\",\n        latestState: \"0\",\n    }, {\n        typeOne: '0',\n        type: '户内', //0:代表[户内]1:代表[公区]\n        id: '201508119273', //单子标记\n        owner: '唐小包 12345679',\n        content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n        createDate: \"2015-10-13  12:39\",\n        address: \"南京市建邺区万达广场8-A-3-1102\",\n        latestState: \"1\",\n    }, {\n        typeOne: '1',\n        id: '201508119273', //单子标记\n        tit: '恭喜，你得到一份小区表扬',\n        content: '在楼前新小区建设听证会上',\n        createDate: \"2015-10-13  12:39\",\n        latestState: \"0\",\n    }, {\n        typeOne: '1',\n        id: '201508119273', //单子标记\n        tit: '中奖了，中大奖了',\n        content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n        createDate: \"2015-10-13  12:39\",\n        latestState: \"1\",\n    }, ];\n\n    var result = mocksData.resetData(data);\n\n    $httpBackend.whenGET(/\\/staffMessage\\/staffMessageList(\\?pageIndex=(\\d)?&pageSize=(\\d)?)?/).passThrough();\n    $httpBackend.whenDELETE(/\\/staffMessage\\/DelMessage\\/[a-fA-F0-9]{32,32}/).passThrough();\n\n}])","angular.module('qjCommunity.home.mineWork', [\n    'ionic',\n    'qjCommunity.home.mineWork.mock',\n    'qjCommunity.common.cordova'\n])\n\n.config(['$stateProvider', function($stateProvider) {\n    $stateProvider.state('home/mineWork', {\n        url: '/home/mineWork',\n        controller: 'MineWorkController',\n        templateUrl: 'home/mineWork/mineWork.tpl.html',\n        cache: false,\n        resolve: {\n            resolvedData: ['$http', function($http) {\n                return $http.get('/workbench/workbench/1');\n            }]\n        },\n        authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"],\n    })\n}])\n\n.controller('MineWorkController', ['$state', '$ionicHistory', '$scope', '$http', 'resolvedData', '$ionicTabsDelegate', '$ionicPopup', 'CurrentUserService', 'MrDevice', 'SaveVersionService', 'SavePopShowFristService',\n    function($state, $ionicHistory, $scope, $http, resolvedData, $ionicTabsDelegate, $ionicPopup, CurrentUserService, MrDevice, SaveVersionService, SavePopShowFristService) {\n\n        $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n        $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n        $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n\n        var deviceInfo = MrDevice.getDevice();\n        if (!!deviceInfo) {\n            platform = deviceInfo.platform;\n        } else {\n            platform = \"WEB\";\n        }\n\n        $scope.$on('$ionicView.enter', function() {\n            $scope.currentTab = 'home/mineWork';\n            $ionicTabsDelegate.select(4);\n        })\n        $scope.data = resolvedData.data;\n        $scope.changeNumber = function() {\n            $scope.data.countPraise = 0;\n        };\n\n\n        $scope.version = SaveVersionService.getVersion().appVersion;\n\n        $scope.dropOut = function() {\n            showConfirmDis('确定要退出么？', '确定', '取消');\n        };\n        var showConfirmDis = function(template, leftText, rightText) {\n            var confirmPopup = $ionicPopup.confirm({\n                template: template,\n                okText: leftText,\n                cancelText: rightText\n            });\n            confirmPopup.then(function(res) {\n                if (res) {\n                    $http.post('/user/exitForStaff').success(function(result) {\n                        showAlert('退出成功', '确定', '1');\n                    }).error(function(msg) {\n                        showAlert('退出失败', '确定', '2');\n                    });\n                }\n            });\n        };\n        $scope.checkVersion = function() {\n            if (platform == 'iOS') {\n                $http.get('/mineWorkbench/staffVersion/1')\n                    .then(\n                        function(message) {\n                            var parmars = {\n                                \"appVersionId\": message.data.appVersionId,\n                                \"appVersionType\": message.data.appVersionType,\n                                \"appVersion\": message.data.appVersion,\n                                \"appVersionStatus\": message.data.appVersionStatus,\n                                \"downUrl\": message.data.downUrl,\n                                \"appVersionName\": message.data.appVersionName,\n                                \"appRemark\": message.data.appRemark,\n                                \"userType\": message.data.userType,\n                                \"sign\": \"2\"\n                            }\n                            MRUpdateApp.upadteAppVersion(function success(message) {}, function failed(message) {}, parmars);\n                        },\n                        function(msg) {\n                            showConfirm(\"版本检测失败\", '确定', 2);\n                        }\n                    );\n            } else if (platform == 'Android') {\n                $http.get('/mineWorkbench/staffVersion/2')\n                    .then(\n                        function(message) {\n                            var parmars = {\n                                \"appVersionId\": message.data.appVersionId,\n                                \"appVersionType\": message.data.appVersionType,\n                                \"appVersion\": message.data.appVersion,\n                                \"appVersionStatus\": message.data.appVersionStatus,\n                                \"downUrl\": message.data.downUrl,\n                                \"appVersionName\": message.data.appVersionName,\n                                \"appRemark\": message.data.appRemark,\n                                \"userType\": message.data.userType,\n                                \"sign\": \"2\"\n                            }\n                            MRUpdateApp.upadteAppVersion(function success(message) {}, function failed(message) {}, parmars);\n                        },\n                        function(msg) {\n                            showConfirm(\"版本检测失败\", '确定', 2);\n                        }\n                    );\n            } else if (platform == 'WEB') {\n                showConfirm(\"请使用移动设备检测版本\", '确定', 2);\n            }\n        }\n        var showAlert = function(template, btnText, num) {\n            var confirmPopup = $ionicPopup.alert({\n                template: template,\n                okText: btnText\n            });\n            confirmPopup.then(function(res) {\n                if (res && 1 == num) {\n                    SavePopShowFristService.setPopShowBlr(false);\n                    CurrentUserService.destroyUserSession();\n                    $ionicHistory.clearHistory();\n                    $ionicHistory.clearCache().then(function() {\n                        if (isApp) {\n                            MRClearCache.finshCache(function success() {}, function failed(message) {});\n                        } else {\n                            $state.go(\"blankPage\", {}, { location: 'replace' });\n                        }\n\n                    });\n                    $ionicHistory.nextViewOptions({\n                        disableAnimate: true,\n                        disableBack: true\n                    });\n                }\n            });\n        };\n        //弹出框\n        var showConfirm = function(template, okText, num) {\n            var confirmPopup = $ionicPopup.alert({\n                template: template,\n                okText: okText\n            });\n            confirmPopup.then(function(res) {\n                if (res && num == 1) {\n                    $ionicHistory.goBack();\n                }\n            });\n        };\n    }\n])","angular.module('qjCommunity.home.mineWork.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    // $httpBackend.whenGET('/mineWorkbench/staffVersion/1').passThrough();\n    // $httpBackend.whenGET('/mineWorkbench/staffVersion/2').passThrough();\n    // $httpBackend.whenGET('/mineWorkbench/mineWorkbench/1').passThrough();\n    // $httpBackend.whenPOST('/user/exitForStaff').passThrough();\n\n    var data = {\n        workBenchDTO: {\n            staffId: \"earl\",\n            userName: \"w_earl\",\n            logo: \"../images/mineWork/head.png\",\n            countPraise: \"1\",\n            version: \"1.0\",\n        },\n    };\n    var result = mocksData.resetData(data);\n\n    $httpBackend.whenGET('/workbench/workbench/1').passThrough();\n    $httpBackend.whenGET('/mineWorkbench/staffVersion/1').passThrough();\n    $httpBackend.whenGET('/mineWorkbench/staffVersion/2').passThrough();\n    $httpBackend.whenPOST('/user/exitForStaff').passThrough();\n}])","angular.module('qjCommunity.home.outTape', [\n        'ionic',\n        'qjCommunity.home.outTape.mock',\n    ])\n    .config(['$stateProvider', function($stateProvider) {\n        $stateProvider.state('home/outTape', {\n            url: '/home/outTape',\n            controller: 'outTapeController',\n            templateUrl: 'home/outTape/outTape.tpl.html',\n            cache: 'false',\n            resolve: {\n                resolvedData: ['$http', function($http) {\n                    return $http.get('/visitor/goBarList?pageIndex=0&pageSize=10');\n                }],\n            },\n            authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\"],\n        })\n    }])\n\n.controller('outTapeController', ['$scope', '$http', 'resolvedData', '$ionicTabsDelegate', '$ionicHistory', 'CurrentUserService',\n        function($scope, $http, resolvedData, $ionicTabsDelegate, $ionicHistory, CurrentUserService) {\n\n            $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n            $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n            $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n\n            $scope.$on('$ionicView.enter', function() {\n                $scope.currentTab = 'home/outTape';\n                $ionicTabsDelegate.select(1);\n            })\n            if (resolvedData != null) {\n                $scope.data = resolvedData.data;\n            };\n\n            $scope.sortShow = 1;\n            $scope.changeItem = function(numType) {\n                $scope.sortShow = numType;\n            };\n            var hasNextPage = function(data) {\n                return data ? data.length > 0 : false;\n            }\n            $scope.pageInfo = {\n                hasNextPage: hasNextPage($scope.data),\n                pageNum: 0\n            };\n\n            $scope.refresh = function(url) {\n                    $http.get(url)\n                        .success(function(result) {\n                            $scope.data = result;\n                            $scope.pageInfo.pageNum = 0;\n                            $scope.pageInfo.hasNextPage = hasNextPage($scope.data);\n                        })\n                        .finally(function() {\n                            // 停止广播ion-refresher\n                            $scope.$broadcast('scroll.refreshComplete');\n                        });\n                }\n                //下拉刷新待分配\n            $scope.doRefresh = function() {\n                return $scope.refresh('/visitor/goBarList?pageIndex=0&pageSize=10');\n            };\n\n            $scope.loadMore = function() {\n                $http.get('/visitor/goBarList', {\n                    params: {\n                        pageIndex: $scope.pageInfo.pageNum + 1,\n                        pageSize: 10\n                    }\n                }).success(function(result) {\n                    $scope.pageInfo.pageNum += 1;\n                    $scope.pageInfo.hasNextPage = hasNextPage(result);\n                    if (result.length) {\n                        for (var i = 0; i < result.length; i++) {\n                            $scope.data.push(result[i]);\n                        }\n                    }\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                }).finally(function() {\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            };\n        }\n    ])\n    //字数控制过滤器\n    .filter('characters', function() {\n        return function(input, chars, breakOnWord) {\n            if (isNaN(chars)) return input;\n            if (chars <= 0) return '';\n            if (input && input.length > chars) {\n                input = input.substring(0, chars);\n\n                if (!breakOnWord) {\n                    var lastspace = input.lastIndexOf(' ');\n                    //get last space\n                    if (lastspace !== -1) {\n                        input = input.substr(0, lastspace);\n                    }\n                } else {\n                    while (input.charAt(input.length - 1) === ' ') {\n                        input = input.substr(0, input.length - 1);\n                    }\n                }\n                return input + '…';\n            }\n            return input;\n        };\n    })","angular.module('qjCommunity.home.outTape.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    var data = [{\n        id: '201508119273',\n        type: \"刘德华\",\n        plateNumber: '车辆牌号：京A 000000',\n        content: '请放行',\n        createDate: \"2015-10-13  12:39\",\n        outDate: \"2015-10-16  16:39\",\n        status: \"0\",\n    }, {\n        id: '201508119273',\n        type: \"周润发\",\n        plateNumber: '车辆牌号：京A 100000',\n        content: '请放行',\n        createDate: \"2015-10-13  12:39\",\n        outDate: \"2015-10-16  16:39\",\n        status: \"0\",\n    }, ];\n\n    var result = mocksData.resetData(data);\n    // $httpBackend.whenGET('/outTape/outTapeList?type=户内&pageIndex=0&pageSize=10').respond(result);\n    $httpBackend.whenGET(/\\/visitor\\/goBarList(\\?&pageIndex=(\\d)?&pageSize=(\\d)?)?/).passThrough();\n\n}])","angular.module('qjCommunity.home.visivorPassage', [\n        'ionic',\n        'qjCommunity.home.visivorPassage.mock',\n        'qjCommunity.common.cordova'\n    ])\n    .config(['$stateProvider', function($stateProvider) {\n        $stateProvider.state('home/visivorPassage', {\n            url: '/home/visivorPassage',\n            controller: 'visivorPassageController',\n            templateUrl: 'home/visivorPassage/visivorPassage.tpl.html',\n            cache: 'false',\n            resolve: {\n                resolvedData: ['$http', function($http) {\n                    return $http.get('/visitor/visitorInfos');\n                }],\n            },\n            authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\n        })\n    }])\n\n.controller('visivorPassageController', ['$scope', '$http', 'resolvedData', '$ionicTabsDelegate', '$ionicHistory', 'MrDevice', '$ionicPopup', 'MrBarcodeScanner', 'CurrentUserService',\n    function($scope, $http, resolvedData, $ionicTabsDelegate, $ionicHistory, MrDevice, $ionicPopup, MrBarcodeScanner, CurrentUserService) {\n\n        $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n        $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n        $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n\n        $scope.$on('$ionicView.enter', function() {\n            $scope.currentTab = 'home/visivorPassage';\n            $ionicTabsDelegate.select(2);\n        })\n        if (resolvedData != null) {\n            $scope.data = resolvedData.data;\n        };\n        $scope.showContent = false;\n        $scope.barcode = function() {\n            var device = MrDevice.getDevice();\n            var platform = \"WEB\";\n            var phoneUUID = \"phoneUUID\";\n            if (!!device) {\n                platform = device.platform;\n                phoneUUID = device.uuid;\n            }\n            if (platform == 'iOS') {\n                var str = \"\";\n                ScannerPlugin.starScannerPlugin(function(dataShow) {\n                    $scope.showContent = true;\n                    $scope.data = eval(\"(\" + dataShow + \")\");\n                    $scope.$digest();\n                }, function(error) {\n                    showConfirm('sorry', '请重新扫描', 2);\n                }, str);\n\n            } else {\n                MrBarcodeScanner\n                    .scan()\n                    .then(function(barcodeData) {\n                        if (barcodeData.text != \"\") {\n                            $scope.showContent = true;\n                            $scope.data = eval(\"(\" + barcodeData.text + \")\");\n                        };\n                    }, function(error) {\n                        showConfirm('sorry', '请重新扫描', 2);\n                    });\n            }\n\n        }\n\n        $scope.release = function() {\n                var params = {\n                    \"id\": $scope.data.id\n                };\n                $http.post('/visitor/confirmation', params)\n                    .then(\n                        function(result) {\n                            $scope.showContent = false;\n                            showConfirm('确定', \"操作成功\", 1);\n                        },\n                        function(msg) {\n                            showConfirm('确定', \"操作失败\", 2);\n                        }\n                    );\n            }\n            //弹出框\n        var showConfirm = function(okText, template, num) {\n            var confirmPopup = $ionicPopup.alert({\n                template: template,\n                okText: okText\n            });\n            confirmPopup.then(function(res) {\n                if (res && num == 1) {\n                    $ionicHistory.goBack();\n                }\n            });\n        };\n    }\n])","angular.module('qjCommunity.home.visivorPassage.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    var data = [{\n        id: '201508119273',\n        plateNumber: '车辆牌号：京A 000000',\n        content: '请放行',\n        createDate: \"2015-10-13  12:39\",\n        outDate: \"2015-10-16  16:39\",\n        status: \"0\",\n    }, {\n        id: '201508119273',\n        plateNumber: '车辆牌号：京A 100000',\n        content: '请放行',\n        createDate: \"2015-10-13  12:39\",\n        outDate: \"2015-10-16  16:39\",\n        status: \"0\",\n    }, ];\n\n    var result = mocksData.resetData(data);\n    // $httpBackend.whenGET(/\\/visitor\\/visitorInfos/).respond(result);\n    $httpBackend.whenGET(/\\/visitor\\/visitorInfos/).passThrough();\n    $httpBackend.whenPOST(/\\/visitor\\/confirmation/).passThrough();\n}])","angular.module('qjCommunity.home.workOrder', [\n        'ionic',\n        'qjCommunity.home.workOrder.mock',\n    ])\n    .config(['$stateProvider', function($stateProvider) {\n        $stateProvider.state('home/workOrder', {\n            url: '/home/workOrder',\n            controller: 'workOrderController',\n            templateUrl: 'home/workOrder/workOrder.tpl.html',\n            cache: 'false',\n            resolve: {\n                resolvedData: ['$http', function($http) {\n                    return $http.get('/workOrder/workOrderList?type=1&pageIndex=1&pageSize=10');\n                }],\n                resolvedDataTwo: ['$http', function($http) {\n                    return $http.get('/workOrder/workOrderList?type=2&pageIndex=1&pageSize=10');\n                }]\n            },\n            authorizedRuleType: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n\n        })\n    }])\n\n.controller('workOrderController', ['$scope', '$http', 'resolvedData', 'resolvedDataTwo', '$state', '$ionicViewSwitcher', '$ionicTabsDelegate', '$ionicHistory', '$ionicPopup', 'CurrentUserService', 'MrDevice',\n        function($scope, $http, resolvedData, resolvedDataTwo, $state, $ionicViewSwitcher, $ionicTabsDelegate, $ionicHistory, $ionicPopup, CurrentUserService, MrDevice) {\n\n            $scope.showTabBaoan = CurrentUserService.userSession().showTabBaoan;\n            $scope.showTabBaojie = CurrentUserService.userSession().showTabBaojie;\n            $scope.showTabWeixiu = CurrentUserService.userSession().showTabWeixiu;\n            $scope.showSend = CurrentUserService.userSession().showSend;\n\n            $scope.$on('$ionicView.enter', function() {\n                $scope.currentTab = 'home/workOrder';\n                $ionicTabsDelegate.select(1);\n            })\n\n            var platform = \"WEB\";\n            $scope.showTabStyle = \"false\";\n            var deviceInfo = MrDevice.getDevice();\n            if (!!deviceInfo) {\n                platform = deviceInfo.platform;\n            } else {\n                platform = \"WEB\";\n            }\n            if (platform == 'WEB') {\n                $scope.showTabStyle = true;\n            } else if (platform == 'iOS') {\n                $scope.showTabStyle = false;\n            } else if (platform == 'Android') {\n                $scope.showTabStyle = true;\n            }\n\n            if (resolvedData != null) {\n                $scope.data = resolvedData.data;\n            };\n            if (resolvedDataTwo != null) {\n                $scope.dataTwo = resolvedDataTwo.data;\n            };\n            $scope.sortShow = 0;\n            $scope.changeItem = function(numType) {\n                $scope.sortShow = numType;\n            };\n            var hasNextPage = function(data) {\n                return data ? data.length > 0 : false;\n            }\n            $scope.pageInfo = {\n                hasNextPage: hasNextPage($scope.data),\n                pageNum: 1\n            };\n            $scope.pageInfoTwo = {\n                hasNextPage: hasNextPage($scope.dataTwo),\n                pageNum: 1\n            };\n\n            $scope.refresh = function(url) {\n                    $http.get(url)\n                        .success(function(result) {\n                            $scope.data = result;\n                            $scope.pageInfo.pageNum = 1;\n                            $scope.pageInfo.hasNextPage = hasNextPage($scope.data);\n                        })\n                        .finally(function() {\n                            // 停止广播ion-refresher\n                            $scope.$broadcast('scroll.refreshComplete');\n                        });\n                }\n                //下拉刷新待分配\n            $scope.doRefresh = function() {\n                return $scope.refresh('/workOrder/workOrderList?type=1&pageIndex=0&pageSize=10');\n            };\n\n            $scope.loadMore = function() {\n                var type = 1;\n                $http.get('/workOrder/workOrderList', {\n                    params: {\n                        type: type,\n                        pageIndex: $scope.pageInfo.pageNum + 1,\n                        pageSize: 10\n                    }\n                }).success(function(result) {\n                    $scope.pageInfo.pageNum += 1;\n                    $scope.pageInfo.hasNextPage = hasNextPage(result);\n                    if (result.length) {\n                        for (var i = 0; i < result.length; i++) {\n                            $scope.data.push(result[i]);\n                        }\n                    }\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                }).finally(function() {\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            };\n\n            $scope.refreshTwo = function(url) {\n                    $http.get(url)\n                        .success(function(result) {\n                            $scope.dataTwo = result;\n                            $scope.pageInfoTwo.pageNum = 1;\n                            $scope.pageInfoTwo.hasNextPage = hasNextPage($scope.data);\n                        })\n                        .finally(function() {\n                            // 停止广播ion-refresher\n                            $scope.$broadcast('scroll.refreshComplete');\n                        });\n                }\n                //下拉刷新进行中\n            $scope.doRefreshTwo = function() {\n                return $scope.refreshTwo('/workOrder/workOrderList?type=2&pageIndex=0&pageSize=10');\n\n            };\n\n\n            $scope.loadMoreTwo = function() {\n                var type = 2;\n                $http.get('/workOrder/workOrderList', {\n                    params: {\n                        type: type,\n                        pageIndex: $scope.pageInfoTwo.pageNum + 1,\n                        pageSize: 10\n                    }\n                }).success(function(result) {\n                    $scope.pageInfoTwo.pageNum += 1;\n                    $scope.pageInfoTwo.hasNextPage = hasNextPage(result);\n                    if (result.length) {\n                        for (var i = 0; i < result.length; i++) {\n                            $scope.dataTwo.push(result[i]);\n                        }\n                    }\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                }).finally(function() {\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            };\n        }\n    ])\n    //字数控制过滤器\n    .filter('characters', function() {\n        return function(input, chars, breakOnWord) {\n            if (isNaN(chars)) return input;\n            if (chars <= 0) return '';\n            if (input && input.length > chars) {\n                input = input.substring(0, chars);\n\n                if (!breakOnWord) {\n                    var lastspace = input.lastIndexOf(' ');\n                    //get last space\n                    if (lastspace !== -1) {\n                        input = input.substr(0, lastspace);\n                    }\n                } else {\n                    while (input.charAt(input.length - 1) === ' ') {\n                        input = input.substr(0, input.length - 1);\n                    }\n                }\n                return input + '…';\n            }\n            return input;\n        };\n    })","angular.module('qjCommunity.home.workOrder.mock', [\n    'ngMockE2E',\n    'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    var data = {\n        currentPage: \"2\", //当前页\n        totalPages: \"5\", //总页数\n        wordOrderList: [{\n            type: '户内',\n            id: '201508119273', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\", //0:未分配；1：继续；2：投诉;3:抢单\n        }, {\n            type: '户内', //0:代表[户内]报修;1:代表[公区];2:代表[投诉]\n            id: '201508119273', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\",\n        }, ],\n    };\n    var result = mocksData.resetData(data);\n    // $httpBackend.whenGET('/workOrder/workOrderList?type=户内&pageIndex=0&pageSize=10').respond(result);\n    $httpBackend.whenGET(/\\/workOrder\\/workOrderList(\\?type=(\\d)?&pageIndex=(\\d)?&pageSize=(\\d)?)?/).passThrough();\n\n    var data = {\n        currentPage: \"1\", //当前页\n        totalPages: \"5\", //总页数\n        wordOrderList: [{\n            type: '公区',\n            id: '201508119272', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\",\n        }, {\n            type: '公区', //0:代表[户内]报修;1:代表[公区];2:代表[投诉]\n            id: '201508119273', //报修单id\n            owner: '唐小包 12345679', //业主信息(姓名、电话)\n            content: '在楼前新小区建设听证会上得知我楼前道路已被修改到这一项目前方，相邻单位及住户一致强烈反对。两个多月了，规划局还未同意施工的情况下，施工方每天干活，现已开槽挖出搂基一米多深了，业主跑遍市政府各职能部门都得不到制止。现院墙已出现开裂，工地宽度七十米多一点还包括这条单行道。',\n            createDate: \"2015-10-13  12:39\",\n            address: \"南京市建邺区万达广场8-A-3-1102\",\n            status: \"0\",\n        }, ],\n    };\n    var result = mocksData.resetData(data);\n    // $httpBackend.whenGET('/workOrder/workOrderList?type=公区&pageIndex=0&pageSize=10').respond(result);\n    // $httpBackend.whenGET('/workOrder/workOrderList?type=公区&pageIndex=0&pageSize=10').passThrough();\n    // $httpBackend.whenGET(/\\/workOrder\\/workOrderList(\\?type=(\\d)?&pageIndex=(\\d)?&pageSize=(\\d)?)?/).passThrough();\n\n}])","angular.module('qjCommunity.blankPage', [\n    'ionic',\n])\n\n.config(['$stateProvider', function($stateProvider) {\n    $stateProvider.state('blankPage', {\n        url: '/blankPage',\n        controller: 'blankPageController',\n        templateUrl: 'userServers/blankPage/blankPage.tpl.html',\n        authorizedRuleType: [\"1\", \"2\", \"3\", \"5\", \"6\", \"4\"],\n    })\n}])\n\n.controller('blankPageController', ['$scope', '$http', '$ionicListDelegate', '$ionicHistory',\n    function($scope, $http, $ionicListDelegate, $ionicHistory) {}\n])","angular.module('qjCommunity.login', [\n    'ionic',\n    'qjCommunity.login.mock'\n])\n\n.controller('LoginController', ['$ionicHistory', '$http', '$ionicModal', '$rootScope', '$scope', '$ionicPopup', 'CurrentUserService', '$state', '$stateParams', '$ionicHistory',\n    function($ionicHistory, $http, $ionicModal, $rootScope, $scope, $ionicPopup, CurrentUserService, $state, $stateParams, $ionicHistory) {\n        $scope.pageShow = {\n            login: true,\n            guestLogin: false,\n            register: false,\n            forgotPwd: false\n        };\n        $scope.credentials = {\n            username: \"\",\n            password: \"\",\n            form: \"Android\",\n            phoneUUID: \"uuid\"\n        }\n\n        $scope.guestLoginMsg = {\n            phoneNum: '',\n            password: ''\n        };\n\n        $scope.showConfirm = function(title, template, rightText, leftText) {\n            var confirmPopup = $ionicPopup.confirm({\n                title: title,\n                okText: leftText,\n                template: template,\n                cancelText: rightText\n            });\n\n            confirmPopup.then(function(res) {\n                if (res) { //\n                } else {}\n            });\n        };\n        $scope.login = function(credentials, formName) {\n            // var username = base64encode(\"username\");\n            // var password = base64encode(\"password\");\n            // var form = base64encode(\"form\");\n            // var phoneUUID = base64encode(\"phoneUUID\");\n            // var sendData = {};\n            // sendData[username] = base64encode(credentials.username);\n            // sendData[password] = base64encode(credentials.password);\n            // sendData[form] = base64encode(credentials.form);\n            // sendData[phoneUUID] = base64encode(credentials.phoneUUID);\n            if (formName.$valid) {\n                CurrentUserService.login(credentials)\n                    .then(function(user) {\n                        if (user) {\n                            var rule = $scope.modal.nextState.toState.authorizedRuleType;\n                            var isHasAuth = CurrentUserService.contains(rule, user.data.roleId);\n                            if (isHasAuth) {\n                                //上传device\n                                // obtainDeviceToken();\n                                //新添加的\n                                $scope.modal.remove();\n                                if ($scope.modal.nextState.toState.name == \"blankPage\") {\n                                    $ionicHistory.clearCache().then(function() {\n                                        $state.go(\"home/index\", {}, { location: 'replace' });\n                                    });\n                                    $ionicHistory.nextViewOptions({\n                                        disableAnimate: true,\n                                        disableBack: true\n                                    });\n                                } else {\n                                    $ionicHistory.clearCache().then(function() {\n                                        $state.go($scope.modal.nextState.toState, $scope.modal.nextState.toParams);\n                                    });\n                                };\n\n                            };\n                        } else {\n                            formName.$submitted = false;\n                        };\n                    }, function() {});\n            } else {\n                $scope.showAlert('请输入用户名或密码', '请输入用户名或密码', '确认');\n                formName.$submitted = false;\n            };\n        }\n\n        $scope.showAlert = function(title, template, okText) {\n            var alertPopup = $ionicPopup.alert({\n                title: title,\n                okText: okText,\n                template: template\n            });\n            alertPopup.then(function(res) {});\n        };\n        $scope.toLogin = function() {\n            $scope.pageShow = {\n                login: true,\n                guestLogin: false,\n                register: false,\n                forgotPwd: false\n            };\n        };\n        $scope.toGuestLogin = function() {\n            $scope.pageShow = {\n                login: false,\n                guestLogin: true,\n                register: false,\n                forgotPwd: false\n            };\n        };\n        $scope.toReg = function() {\n            $scope.pageShow = {\n                login: false,\n                guestLogin: false,\n                register: true,\n                forgotPwd: false\n            };\n        };\n\n        $scope.toForgotPwd = function() {\n            $scope.pageShow = {\n                login: false,\n                guestLogin: false,\n                register: false,\n                forgotPwd: true\n            };\n        };\n\n        $scope.getContentTpl = function(currentTab) {\n            return currentTab + '.tpl.html';\n        };\n    }\n])","angular.module('qjCommunity.login.mock', [\n    'ngMockE2E', 'qjCommunity.common.mocksData'\n])\n\n.run(['$httpBackend', 'mocksData', function($httpBackend, mocksData) {\n    $httpBackend.whenGET('/workOrder/getUserRole').passThrough();\n\n    $httpBackend.whenPOST('/user/loginForStaff').passThrough();\n\n}])"],"sourceRoot":"/source/"}